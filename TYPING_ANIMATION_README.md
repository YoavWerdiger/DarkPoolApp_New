# âœ¨ ×× ×™××¦×™×™×ª Fade ×¢×‘×•×¨ Typing Indicator

## ××” ×–×”? ğŸ¬

×× ×™××¦×™×” ×—×œ×§×” ×•× ×¢×™××” ×›×©×”×˜×§×¡×˜ ×‘header ××©×ª× ×” ×‘×™×Ÿ:
- "X ××©×ª×ª×¤×™×" â† â†’ "×™×•×¡×™ ××§×œ×™×“..."

×‘××§×•× ×©×™× ×•×™ ×¤×ª××•××™, ×™×© **fade-out** â†’ **×©×™× ×•×™ ×˜×§×¡×˜** â†’ **fade-in**.

---

## ××™×š ×–×” ×¢×•×‘×“? âš™ï¸

### 1. Animated Value

```typescript
const subtitleOpacity = useRef(new Animated.Value(1)).current;
```

××ª×—×™×œ ×¢× opacity ×©×œ 1 (×’×œ×•×™ ×œ×’××¨×™).

### 2. State ×œ×˜×§×¡×˜ ×”××•×¦×’

```typescript
const [displayedSubtitle, setDisplayedSubtitle] = useState<string>('');
```

×©×•××¨ ××ª ×”×˜×§×¡×˜ ×©××•×¦×’ **×›×¨×’×¢** (×œ× ××ª ×”×˜×§×¡×˜ ×”×—×“×© ××™×“).

### 3. Effect ×œ×–×™×”×•×™ ×©×™× ×•×™×™×

```typescript
useEffect(() => {
  const newSubtitle = /* ×—×™×©×•×‘ ×”×˜×§×¡×˜ ×”×—×“×© */;
  
  if (newSubtitle !== displayedSubtitle) {
    // ×™×© ×©×™× ×•×™! ×”×¤×¢×œ ×× ×™××¦×™×”
  }
}, [typingUsers, currentChat?.description, membersCount]);
```

×‘×•×“×§ ×× ×”×˜×§×¡×˜ ×”×©×ª× ×” ×•×”×¤×¢×œ×ª ×× ×™××¦×™×” ×¨×§ ×‘××§×¨×” ×›×–×”.

### 4. ×”×× ×™××¦×™×” ×¢×¦××”

```typescript
// ×©×œ×‘ 1: Fade out (150ms)
Animated.timing(subtitleOpacity, {
  toValue: 0,
  duration: 150,
  useNativeDriver: true,
}).start(() => {
  // ×©×œ×‘ 2: ×©× ×” ×˜×§×¡×˜ (×›×©×”×•× ×‘×œ×ª×™ × ×¨××”)
  setDisplayedSubtitle(newSubtitle);
  
  // ×©×œ×‘ 3: Fade in (150ms)
  Animated.timing(subtitleOpacity, {
    toValue: 1,
    duration: 150,
    useNativeDriver: true,
  }).start();
});
```

**×¡×”"×› 300ms** - ××”×™×¨ ××‘×œ ×—×œ×§!

---

## ×”×–×¨×™××” ×”××œ××” ğŸŒŠ

```
1. ××©×ª××© ××ª×—×™×œ ×œ×”×§×œ×™×“
   â†“
2. typingUsers ××©×ª× ×”
   â†“
3. useEffect ××–×”×” ×©×™× ×•×™
   â†“
4. Fade out (150ms) - ×”×˜×§×¡×˜ × ×¢×œ×
   â†“
5. ×”×˜×§×¡×˜ ××©×ª× ×” ×œ"×™×•×¡×™ ××§×œ×™×“..."
   â†“
6. Fade in (150ms) - ×”×˜×§×¡×˜ ××•×¤×™×¢
   â†“
7. âœ¨ ××•×¦×’ ×‘×™×¨×•×§!

[××—×¨×™ 2 ×©× ×™×•×ª ×œ×œ× ×”×§×œ×“×”]

8. typingUsers ×¨×™×§
   â†“
9. useEffect ××–×”×” ×©×™× ×•×™
   â†“
10. Fade out (150ms)
    â†“
11. ×”×˜×§×¡×˜ ×—×–×¨ ×œ"4 ××©×ª×ª×¤×™×"
    â†“
12. Fade in (150ms)
    â†“
13. âœ¨ ××•×¦×’ ×‘××¤×•×¨!
```

---

## ×”×’×“×¨×•×ª ×©××¤×©×¨ ×œ×©× ×•×ª âš™ï¸

### 1. ××©×š ×”×× ×™××¦×™×”

×‘-`ChatRoomScreen.tsx`, ×©×•×¨×•×ª ~30-40:

```typescript
// Fade out
Animated.timing(subtitleOpacity, {
  toValue: 0,
  duration: 150, // <-- ×©× ×” ×›××Ÿ
  useNativeDriver: true,
}).start(() => {
  setDisplayedSubtitle(newSubtitle);
  
  // Fade in
  Animated.timing(subtitleOpacity, {
    toValue: 1,
    duration: 150, // <-- ×•×©× ×” ×›××Ÿ
    useNativeDriver: true,
  }).start();
});
```

**××•×¤×¦×™×•×ª:**
- `100` = ××”×™×¨ ×××•×“ (200ms ×¡×”"×›)
- `150` = ××”×™×¨ ×•×—×œ×§ (300ms ×¡×”"×›) **â† ××•××œ×¥**
- `200` = ×™×•×ª×¨ ××™×˜×™ (400ms ×¡×”"×›)
- `250` = ××™×˜×™ (500ms ×¡×”"×›)

### 2. ×¡×•×’ ×”×× ×™××¦×™×”

××¤×©×¨ ×œ×”×•×¡×™×£ **easing** ×œ×× ×™××¦×™×” ×—×œ×§×” ×™×•×ª×¨:

```typescript
import { Easing } from 'react-native';

Animated.timing(subtitleOpacity, {
  toValue: 0,
  duration: 150,
  easing: Easing.ease, // <-- ×”×•×¡×£ ××ª ×–×”
  useNativeDriver: true,
}).start(/* ... */);
```

**×¡×•×’×™ Easing:**
- `Easing.linear` - ×œ×™× ×™××¨×™ (×‘×¨×™×¨×ª ××—×“×œ)
- `Easing.ease` - ×—×œ×§ (××•××œ×¥)
- `Easing.elastic()` - ××¤×§×˜ ×’×•××™
- `Easing.bounce` - ×§×¤×™×¦×”

---

## ×œ××” ×–×” × ×¨××” ×˜×•×‘? ğŸ¨

### âŒ ×œ×œ× ×× ×™××¦×™×”:
```
"4 ××©×ª×ª×¤×™×" â†’ [×§×¤×™×¦×” ×¤×ª××•××™×ª] â†’ "×™×•×¡×™ ××§×œ×™×“..."
```
**××¨×’×™×© ×’×œ××¦'×™ ×•×—×“.**

### âœ… ×¢× ×× ×™××¦×™×”:
```
"4 ××©×ª×ª×¤×™×" â†’ [× ×¢×œ× ×‘×”×“×¨×’×”] â†’ [××•×¤×™×¢ ×‘×”×“×¨×’×”] â†’ "×™×•×¡×™ ××§×œ×™×“..."
```
**××¨×’×™×© ×—×œ×§, ××§×¦×•×¢×™ ×•× ×¢×™× ×œ×¢×™×Ÿ!**

---

## ×‘×™×¦×•×¢×™× ğŸš€

- **Native Driver**: ×”×× ×™××¦×™×” ×¨×¦×” ×¢×œ thread × ×¤×¨×“ = ×—×œ×§!
- **×§×¦×¨**: ×¨×§ 300ms ×¡×”"×› = ×œ× ××¤×¨×™×¢
- **×—×›×**: ×¨×§ ×›×©×‘×××ª ×™×© ×©×™× ×•×™

---

## ×©×™×œ×•×‘ ×¢× Typing Indicator

×”×›×œ ×¢×•×‘×“ ×‘×™×—×“:

```
1. Typing Service ××–×”×” ×©××§×œ×™×“×™×
   â†“
2. ChatContext ××¢×“×›×Ÿ typingUsers
   â†“
3. useEffect ××–×”×” ×©×™× ×•×™
   â†“
4. ×× ×™××¦×™×™×ª fade ××ª×—×™×œ×”
   â†“
5. ×˜×§×¡×˜ ××©×ª× ×” ×‘×¦×•×¨×” ×—×œ×§×”
   â†“
6. ×¦×‘×¢ ××©×ª× ×” ×œ×™×¨×•×§ (×’× ×—×œ×§!)
```

---

## ×“×™×‘×•×’ ğŸ›

### ×× ×”×× ×™××¦×™×” ×œ× ×¢×•×‘×“×ª:

1. **×‘×“×•×§ ×©×™×© Animated.Text** (×œ× Text ×¨×’×™×œ)
2. **×•×“× ×©-useNativeDriver: true** (×œ×‘×™×¦×•×¢×™×)
3. **×‘×“×•×§ ×‘-console ×©×”typingUsers ××©×ª× ×”**

### ×× ×”×× ×™××¦×™×” ××”×™×¨×” ××“×™/××™×˜×™×ª:

×©× ×” ××ª ×”-`duration` (×¨××” ×œ××¢×œ×”).

---

## ×§×‘×¦×™× ×©×©×•× ×• ğŸ“

- âœ… `screens/Chat/ChatRoomScreen.tsx` - ×”×•×¡×¤×ª ×× ×™××¦×™×”
- âœ… `TYPING_ANIMATION_README.md` - ×”××“×¨×™×š ×”×–×”

---

**×¢×›×©×™×• ×™×© ×œ×š ×× ×™××¦×™×” ×—×œ×§×” ×•××§×¦×•×¢×™×ª!** âœ¨ğŸ¬

